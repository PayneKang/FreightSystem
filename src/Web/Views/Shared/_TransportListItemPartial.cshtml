@model FreightSystem.Models.TransportRecordModel
@using FreightSystem.Models;
@using FreightSystem.Models.Extra;
@{
    UserModel loggedUser = (UserModel)ViewBag.LoggedUser;
}
@if ((@Model.ID % 2) == 0)
{
    <tr type="RecordTR" trid="@Model.ID" class="info">
        <td>
            <a class="has-tip"  href="/Business/TransportDetails/@Model.ID">@Model.DeliverDate.ToString("MM.dd")</a>
        </td>
        <td>
            @if (!Model.ClientName.IsEmpty())
            {
                if (Model.ClientName.Length > 5)
                {
                <div title ="@Model.ClientName">
                    @Model.ClientName.Substring(0, 5)..</div>
                }
                else
                {
                <div>@Model.ClientName</div>
                }
            }
        </td>
        <td>
            @if (!Model.TrayNo.IsEmpty())
            {
                if (Model.TrayNo.Length > 7)
                { 
                <div title ="@Model.TrayNo">
                    @Model.TrayNo.Substring(0, 7)..</div>
                }
                else
                {
                <div>@Model.TrayNo</div>
                }
            }
        </td>
        <td>
            @if (!Model.Driver.IsEmpty())
            {
                if (Model.Driver.Length > 3)
                { 
                <div title ="@Model.Driver">
                    @Model.Driver.Substring(0, 3)..</div>
                }
                else
                {
                <div>@Model.Driver</div>
                }
            }
        </td>
        <td>
            @if (!Model.CarLicense.IsEmpty())
            {
                if (Model.CarLicense.Length > 7)
                { 
                <div title ="@Model.CarLicense">
                    @Model.CarLicense.Substring(0, 7)..</div>
                }
                else
                {
                <div>@Model.CarLicense</div>
                }
            }
        </td>
        <td>
            @if (!Model.PackageName.IsEmpty())
            {
                if (Model.PackageName.Length > 6)
                { 
                <div title ="@Model.PackageName">
                    @Model.PackageName.Substring(0, 6)..</div>
                }
                else
                {
                <div>@Model.PackageName</div>
                }
            }
        </td>
        <td>@Model.Volume
        </td>
        <td>@Model.Quantity
        </td>
        <td>
            @if (!Model.FromLocation.IsEmpty())
            {
                if (Model.FromLocation.Length > 3)
                { 
                <div title ="@Model.FromLocation">
                    @Model.FromLocation.Substring(0, 3)..</div>
                }
                else
                {
                <div>@Model.FromLocation</div>
                }
            }
        </td>
        <td>
            @if (!Model.ToLocation.IsEmpty())
            {
                if (Model.ToLocation.Length > 6)
                { 
                <div title ="@Model.ToLocation">
                    @Model.ToLocation.Substring(0, 6)..</div>
                }
                else
                {
                <div>@Model.ToLocation</div>
                }
            }
        </td>
        <td>@Model.BusinessArea
        </td>
        <td>
            @if (!Model.DeliverType.IsEmpty())
            {
                if (Model.DeliverType.Length > 13)
                { 
                <div title ="@Model.DeliverType">
                    @Model.DeliverType.Substring(0, 13)..</div>
                }
                else
                {
                <div>@Model.DeliverType</div>
                }
            }
        </td>
        <td>
            @Html.Partial("_TransportOptionPartial", Model)
        </td>
    </tr>
}
else
{
    <tr type="RecordTR" trid="@Model.ID" >
        <td>
            <a class="has-tip"  href="/Business/TransportDetails/@Model.ID">@Model.DeliverDate.ToString("MM.dd")</a>
        </td>
        <td>
            @if (!Model.ClientName.IsEmpty())
            {
                if (Model.ClientName.Length > 5)
                {
                <div title ="@Model.ClientName">
                    @Model.ClientName.Substring(0, 5)..</div>
                }
                else
                {
                <div>@Model.ClientName</div>
                }
            }
        </td>
        <td>
            @if (!Model.TrayNo.IsEmpty())
            {
                if (Model.TrayNo.Length > 7)
                { 
                <div title ="@Model.TrayNo">
                    @Model.TrayNo.Substring(0, 7)..</div>
                }
                else
                {
                <div>@Model.TrayNo</div>
                }
            }
        </td>
        <td>
            @if (!Model.Driver.IsEmpty())
            {
                if (Model.Driver.Length > 3)
                { 
                <div title ="@Model.Driver">
                    @Model.Driver.Substring(0, 3)..</div>
                }
                else
                {
                <div>@Model.Driver</div>
                }
            }
        </td>
        <td>
            @if (!Model.CarLicense.IsEmpty())
            {
                if (Model.CarLicense.Length > 7)
                { 
                <div title ="@Model.CarLicense">
                    @Model.CarLicense.Substring(0, 7)..</div>
                }
                else
                {
                <div>@Model.CarLicense</div>
                }
            }
        </td>
        <td>
            @if (!Model.PackageName.IsEmpty())
            {
                if (Model.PackageName.Length > 6)
                { 
                <div title ="@Model.PackageName">
                    @Model.PackageName.Substring(0, 6)..</div>
                }
                else
                {
                <div>@Model.PackageName</div>
                }
            }
        </td>
        <td>@Model.Volume
        </td>
        <td>@Model.Quantity
        </td>
        <td>
            @if (!Model.FromLocation.IsEmpty())
            {
                if (Model.FromLocation.Length > 3)
                { 
                <div title ="@Model.FromLocation">
                    @Model.FromLocation.Substring(0, 3)..</div>
                }
                else
                {
                <div>@Model.FromLocation</div>
                }
            }
        </td>
        <td>
            @if (!Model.ToLocation.IsEmpty())
            {
                if (Model.ToLocation.Length > 6)
                { 
                <div title ="@Model.ToLocation">
                    @Model.ToLocation.Substring(0, 6)..</div>
                }
                else
                {
                <div>@Model.ToLocation</div>
                }
            }
        </td>
        <td>@Model.BusinessArea
        </td>
        <td>
            @if (!Model.DeliverType.IsEmpty())
            {
                if (Model.DeliverType.Length > 13)
                {
                <div title ="@Model.DeliverType">
                    @Model.DeliverType.Substring(0, 13)..</div>
                }
                else
                {
                <div>@Model.DeliverType</div>
                }
            }
        </td>
        <td>
            @Html.Partial("_TransportOptionPartial", Model)
        </td>
    </tr>
}
@*<tr style="display:none;" type="TRDetails" TRID="@record.ID">
        <td colspan="13">
            @if (record.HistoryItem != null)
            {
                <ul>
                    @foreach (TransportRecordsHistoryModel history in record.HistoryItem)
                    {
                        <li><small>@history.LogDateTime.ToString("yyyy-MM-dd HH:mm:ss") : [@history.Operation]
                            @history.Description
                            操作人：@history.User.UserID</small> </li>
                    }
                </ul>
            }
        </td>
    </tr>*@